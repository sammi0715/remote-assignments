<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      label {
        display: block;
      }
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      label {
        padding: 10px;
        font-size: 20px;
      }
      input {
        padding-top: 5px;
      }
      button {
        padding: 5px;
        font-size: 15px;
      }
      .result {
        padding-top: 10px;
        font-size: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <label>Sum Caculator</label>
      <input id="input" type="text" />
      <button id="btn">Calculate</button>
      <div class="result" id="result"></div>
    </div>

    <script>
      const button = document.querySelector("#btn");
      const result = document.querySelector("#result");
      //fetch寫法
      function fetchData() {
        const inputValue = document.querySelector("#input").value; //獲取客戶端所輸入的數值需要放在fetch內部而不是放在global全局範圍
        fetch(`/getData?number=${inputValue}`)
          .then(function (response) {
            return response.text();
          })
          .then(function (data) {
            result.innerHTML = data;
          });
      }
      button.addEventListener("click", fetchData);

      /*  xmlhttprequest  寫法
      function sum() {
        const inputValue = document.querySelector("#input").value;
        const xhr = new XMLHttpRequest();

        xhr.open("GET", `/getData?number=${inputValue}`, true);
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status === 200) {
            result.innerHTML = xhr.responseText;
          }
        };
        xhr.send();
      } */
    </script>
  </body>
</html>
