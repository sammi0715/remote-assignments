<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body>
  <h1>Product List</h1>
  <script>
    // Assignment 1 //
    function delayedResult(n1, n2, delayTime, callback) {
      return new Promise((resolve) => {
        setTimeout(() => {
          const result = n1 + n2;
          if (callback) {
            callback(result);
          }
          resolve(result);
        }, delayTime);
      });
    }
    delayedResult(4, 5, 3000, function (result) {
      console.log(result);
    });
    delayedResult(-5, 10, 2000, function (result) {
      window.alert(result);

    });
    delayedResult(4, 5, 3000).then(console.log);


    // Assignment 2 //
    function ajax(url) {
      return fetch(url)
        .then(function (response) {
          return response.json();
        })
        .then(function (data) {
          return data;
        });
    }
    function render(data) {
      const container = document.createElement("div");
      document.body.appendChild(container);
      container.innerHTML = "";
      for (let i = 0; i < data.length; i++) {
        let product = data[i];
        container.innerHTML +=
          "<div>" +
          "名稱: " +
          product.name +
          " , " +
          "價格: " +
          product.price +
          " , " +
          "說明: " +
          product.description +
          "</div>";
      }
    }
    const url =
      "https://remote-assignment.s3.ap-northeast-1.amazonaws.com/products";
    ajax(url).then((data) => {
      render(data);
    });
  </script>
</body>

</html>